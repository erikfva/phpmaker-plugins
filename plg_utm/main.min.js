function validateDD(lon,lat){var longitud=parseFloat(lon);if(isNaN(longitud)||lon<-180||180<=lon)return alert("Por favor ingrese una longitud valida."),!1;var latitud=parseFloat(lat);return!(isNaN(latitud)||lat<-90||90<lat)||(alert("Por favor ingrese una latitud valida."),!1)}function validateXY(x,y){var x=parseFloat(x);if(isNaN(x))return alert("Por favor ingrese una valor de X válido."),!1;var y=parseFloat(y);return!isNaN(y)||(alert("Por favor ingrese una valor de Y válido."),!1)}function Lat2UTM(){var lon=parseFloat(document.getElementById("lontxt").value),lat=parseFloat(document.getElementById("lattxt").value);if(validateDD(lon,lat)){var xy=new Array(2),zona=Math.floor((lon+180)/6)+1;zona=LatLonToUTMXY(DegToRad(lat),DegToRad(lon),zona,xy),document.getElementById("xtxt").value=parseFloat(xy[0]).toFixed(3),document.getElementById("ytxt").value=parseFloat(xy[1]).toFixed(3);var chkb=document.querySelector("input[id=zona"+zona+"]");chkb?$(chkb).prop("checked",!0).click():alert("No se ha encontrado el componente visual para la zona "+zona)}}function UTM2Lat(){var x=parseFloat(document.getElementById("xtxt").value),y=parseFloat(document.getElementById("ytxt").value),chkb=jQuery("input[name=zona]:checked")[0],zona=parseFloat(0);if(chkb&&(zona=parseFloat(chkb.value)),isNaN(zona)||0==zona)return alert("El valor de la zona UTM no es válido."),!1;if(validateXY(x,y)){var latlon=new Array(2);UTMXYToLatLon(x,y,zona,!0,latlon),document.getElementById("lontxt").value=parseFloat(RadToDeg(latlon[1])).toFixed(8),document.getElementById("lattxt").value=parseFloat(RadToDeg(latlon[0])).toFixed(8)}}function calcUTMCoord(op){var dlg=$("#calc-coord-dialog");dlg.data("onsave",op.onsave||null),dlg.data("lonel",op.lonel||null),dlg.data("latel",op.latel||null),dlg.modal("show")}function buildUTMDialog(){$("body").append($("#tpl-calc-coord").html());var dlg=$("#calc-coord-dialog").on("show.bs.modal",function(){dlg.data("lonel")&&dlg.find("#lontxt").val(parseFloat($(dlg.data("lonel")).val()).toFixed(8)),dlg.data("latel")&&dlg.find("#lattxt").val(parseFloat($(dlg.data("latel")).val()).toFixed(8))});dlg.find(".modal-footer button").on("click",function(event){var $button=$(event.target);dlg.one("hidden.bs.modal",function(){$button.hasClass("btn-primary")&&("function"==typeof dlg.data("onsave")&&dlg.data("onsave")(dlg),dlg.data("lonel")&&$(dlg.data("lonel")).val(dlg.find("#lontxt").val()),dlg.data("latel")&&$(dlg.data("latel")).val(dlg.find("#lattxt").val())),dlg.data("onsave",null).data("lonel",null).data("latel",null)})})}